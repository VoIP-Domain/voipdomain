/*! Buttons for DataTables 1.5.1
 * Â©2016-2017 SpryMedia Ltd - datatables.net/license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","datatables.net"],function(b){return a(b,window,document)})}else{if(typeof exports==="object"){module.exports=function(b,c){if(!b){b=window}if(!c||!c.fn.dataTable){c=require("datatables.net")(b,c).$}return a(c,b,b.document)}}else{a(jQuery,window,document)}}}(function(f,i,k,c){var e=f.fn.dataTable;var g=0;var j=0;var l=e.ext.buttons;var b=function(r,q){if(typeof(q)==="undefined"){q={}}if(q===true){q={}}if(f.isArray(q)){q={buttons:q}}this.c=f.extend(true,{},b.defaults,q);if(q.buttons){this.c.buttons=q.buttons}this.s={dt:new e.Api(r),buttons:[],listenKeys:"",namespace:"dtb"+(g++)};this.dom={container:f("<"+this.c.dom.container.tag+"/>").addClass(this.c.dom.container.className)};this._constructor()};f.extend(b.prototype,{action:function(r,s){var q=this._nodeToButton(r);if(s===c){return q.conf.action}q.conf.action=s;return this},active:function(u,r){var s=this._nodeToButton(u);var q=this.c.dom.button.active;var t=f(s.node);if(r===c){return t.hasClass(q)}t.toggleClass(q,r===c?true:r);return this},add:function(s,q){var v=this.s.buttons;if(typeof q==="string"){var u=q.split("-");var w=this.s;for(var t=0,r=u.length-1;t<r;t++){w=w.buttons[u[t]*1]}v=w.buttons;q=u[u.length-1]*1}this._expandButton(v,s,false,q);this._draw();return this},container:function(){return this.dom.container},disable:function(r){var q=this._nodeToButton(r);f(q.node).addClass(this.c.dom.button.disabled);return this},destroy:function(){f("body").off("keyup."+this.s.namespace);var t=this.s.buttons.slice();var r,q;for(r=0,q=t.length;r<q;r++){this.remove(t[r].node)}this.dom.container.remove();var s=this.s.dt.settings()[0];for(r=0,q=s.length;r<q;r++){if(s.inst===this){s.splice(r,1);break}}return this},enable:function(s,q){if(q===false){return this.disable(s)}var r=this._nodeToButton(s);f(r.node).removeClass(this.c.dom.button.disabled);return this},name:function(){return this.c.name},node:function(r){var q=this._nodeToButton(r);return f(q.node)},processing:function(s,q){var r=this._nodeToButton(s);if(q===c){return f(r.node).hasClass("processing")}f(r.node).toggleClass("processing",q);return this},remove:function(v){var s=this._nodeToButton(v);var u=this._nodeToHost(v);var t=this.s.dt;if(s.buttons.length){for(var r=s.buttons.length-1;r>=0;r--){this.remove(s.buttons[r].node)}}if(s.conf.destroy){s.conf.destroy.call(t.button(v),t,f(v),s.conf)}this._removeKey(s.conf);f(s.node).remove();var q=f.inArray(s,u);u.splice(q,1);return this},text:function(v,r){var s=this._nodeToButton(v);var w=this.c.dom.collection.buttonLiner;var q=s.inCollection&&w&&w.tag?w.tag:this.c.dom.buttonLiner.tag;var u=this.s.dt;var t=f(s.node);var x=function(y){return typeof y==="function"?y(u,t,s.conf):y};if(r===c){return x(s.conf.text)}s.conf.text=r;if(q){t.children(q).html(x(r))}else{t.html(x(r))}return this},_constructor:function(){var u=this;var t=this.s.dt;var v=t.settings()[0];var s=this.c.buttons;if(!v._buttons){v._buttons=[]}v._buttons.push({inst:this,name:this.c.name});for(var r=0,q=s.length;r<q;r++){this.add(s[r])}t.on("destroy",function(){u.destroy()});f("body").on("keyup."+this.s.namespace,function(x){if(!k.activeElement||k.activeElement===k.body){var w=String.fromCharCode(x.keyCode).toLowerCase();if(u.s.listenKeys.toLowerCase().indexOf(w)!==-1){u._keypress(w,x)}}})},_addKey:function(q){if(q.key){this.s.listenKeys+=f.isPlainObject(q.key)?q.key.key:q.key}},_draw:function(r,t){if(!r){r=this.dom.container;t=this.s.buttons}r.children().detach();for(var s=0,q=t.length;s<q;s++){r.append(t[s].inserter);r.append(" ");if(t[s].buttons&&t[s].buttons.length){this._draw(t[s].collection,t[s].buttons)}}},_expandButton:function(w,x,y,s){var r=this.s.dt;var u=0;var A=!f.isArray(x)?[x]:x;for(var v=0,B=A.length;v<B;v++){var z=this._resolveExtends(A[v]);if(!z){continue}if(f.isArray(z)){this._expandButton(w,z,y,s);continue}var q=this._buildButton(z,y);if(!q){continue}if(s!==c){w.splice(s,0,q);s++}else{w.push(q)}if(q.conf.buttons){var t=this.c.dom.collection;q.collection=f("<"+t.tag+"/>").addClass(t.className).attr("role","menu");q.conf._collection=q.collection;this._expandButton(q.buttons,q.conf.buttons,true,s)}if(z.init){z.init.call(r.button(q.node),r,f(q.node),z)}u++}},_buildButton:function(u,y){var r=this.c.dom.button;var t=this.c.dom.buttonLiner;var v=this.c.dom.collection;var s=this.s.dt;var A=function(C){return typeof C==="function"?C(s,x,u):C};if(y&&v.button){r=v.button}if(y&&v.buttonLiner){t=v.buttonLiner}if(u.available&&!u.available(s,u)){return false}var w=function(F,E,D,C){C.action.call(E.button(D),F,E,D,C);f(E.table().node()).triggerHandler("buttons-action.dt",[E.button(D),E,D,C])};var x=f("<"+r.tag+"/>").addClass(r.className).attr("tabindex",this.s.dt.settings()[0].iTabIndex).attr("aria-controls",this.s.dt.table().node().id).on("click.dtb",function(C){C.preventDefault();if(!x.hasClass(r.disabled)&&u.action){w(C,s,x,u)}x.blur()}).on("keyup.dtb",function(C){if(C.keyCode===13){if(!x.hasClass(r.disabled)&&u.action){w(C,s,x,u)}}});if(r.tag.toLowerCase()==="a"){x.attr("href","#")}if(t.tag){var q=f("<"+t.tag+"/>").html(A(u.text)).addClass(t.className);if(t.tag.toLowerCase()==="a"){q.attr("href","#")}x.append(q)}else{x.html(A(u.text))}if(u.enabled===false){x.addClass(r.disabled)}if(u.className){x.addClass(u.className)}if(u.titleAttr){x.attr("title",A(u.titleAttr))}if(u.attr){x.attr(u.attr)}if(!u.namespace){u.namespace=".dt-button-"+(j++)}var B=this.c.dom.buttonContainer;var z;if(B&&B.tag){z=f("<"+B.tag+"/>").addClass(B.className).append(x)}else{z=x}this._addKey(u);return{conf:u,node:x.get(0),inserter:z,buttons:[],inCollection:y,collection:null}},_nodeToButton:function(u,t){if(!t){t=this.s.buttons}for(var s=0,q=t.length;s<q;s++){if(t[s].node===u){return t[s]}if(t[s].buttons.length){var r=this._nodeToButton(u,t[s].buttons);if(r){return r}}}},_nodeToHost:function(u,t){if(!t){t=this.s.buttons}for(var s=0,q=t.length;s<q;s++){if(t[s].node===u){return t}if(t[s].buttons.length){var r=this._nodeToHost(u,t[s].buttons);if(r){return r}}}},_keypress:function(r,t){if(t._buttonsHandled){return}var s=function(u,v){if(!u.key){return}if(u.key===r){t._buttonsHandled=true;f(v).click()}else{if(f.isPlainObject(u.key)){if(u.key.key!==r){return}if(u.key.shiftKey&&!t.shiftKey){return}if(u.key.altKey&&!t.altKey){return}if(u.key.ctrlKey&&!t.ctrlKey){return}if(u.key.metaKey&&!t.metaKey){return}t._buttonsHandled=true;f(v).click()}}};var q=function(v){for(var w=0,u=v.length;w<u;w++){s(v[w].conf,v[w].node);if(v[w].buttons.length){q(v[w].buttons)}}};q(this.s.buttons)},_removeKey:function(s){if(s.key){var t=f.isPlainObject(s.key)?s.key.key:s.key;var r=this.s.listenKeys.split("");var q=f.inArray(t,r);r.splice(q,1);this.s.listenKeys=r.join("")}},_resolveExtends:function(w){var r=this.s.dt;var v,y;var u=function(A){var z=0;while(!f.isPlainObject(A)&&!f.isArray(A)){if(A===c){return}if(typeof A==="function"){A=A(r,w);if(!A){return false}}else{if(typeof A==="string"){if(!l[A]){throw"Unknown button type: "+A}A=l[A]}}z++;if(z>30){throw"Buttons: Too many iterations"}}return f.isArray(A)?A:f.extend({},A)};w=u(w);while(w&&w.extend){if(!l[w.extend]){throw"Cannot extend unknown button type: "+w.extend}var s=u(l[w.extend]);if(f.isArray(s)){return s}else{if(!s){return false}}var x=s.className;w=f.extend({},s,w);if(x&&w.className!==x){w.className=x+" "+w.className}var t=w.postfixButtons;if(t){if(!w.buttons){w.buttons=[]}for(v=0,y=t.length;v<y;v++){w.buttons.push(t[v])}w.postfixButtons=null}var q=w.prefixButtons;if(q){if(!w.buttons){w.buttons=[]}for(v=0,y=q.length;v<y;v++){w.buttons.splice(v,0,q[v])}w.prefixButtons=null}w.extend=s.extend}return w}});b.background=function(q,r,s){if(s===c){s=400}if(q){f("<div/>").addClass(r).css("display","none").appendTo("body").fadeIn(s)}else{f("body > div."+r).fadeOut(s,function(){f(this).removeClass(r).remove()})}};b.instanceSelector=function(u,r){if(!u){return f.map(r,function(w){return w.inst})}var q=[];var t=f.map(r,function(w){return w.name});var s=function(x){if(f.isArray(x)){for(var y=0,w=x.length;y<w;y++){s(x[y])}return}if(typeof x==="string"){if(x.indexOf(",")!==-1){s(x.split(","))}else{var v=f.inArray(f.trim(x),t);if(v!==-1){q.push(r[v].inst)}}}else{if(typeof x==="number"){q.push(r[x].inst)}}};s(u);return q};b.buttonSelector=function(r,q){var t=[];var x=function(A,E,B){var D;var y;for(var C=0,z=E.length;C<z;C++){D=E[C];if(D){y=B!==c?B+C:C+"";A.push({node:D.node,name:D.conf.name,idx:y});if(D.buttons){x(A,D.buttons,y+"-")}}}};var w=function(A,C){var B,H;var E=[];x(E,C.s.buttons);var z=f.map(E,function(I){return I.node});if(f.isArray(A)||A instanceof f){for(B=0,H=A.length;B<H;B++){w(A[B],C)}return}if(A===null||A===c||A==="*"){for(B=0,H=E.length;B<H;B++){t.push({inst:C,node:E[B].node})}}else{if(typeof A==="number"){t.push({inst:C,node:C.s.buttons[A].node})}else{if(typeof A==="string"){if(A.indexOf(",")!==-1){var F=A.split(",");for(B=0,H=F.length;B<H;B++){w(f.trim(F[B]),C)}}else{if(A.match(/^\d+(\-\d+)*$/)){var D=f.map(E,function(I){return I.idx});t.push({inst:C,node:E[f.inArray(A,D)].node})}else{if(A.indexOf(":name")!==-1){var y=A.replace(":name","");for(B=0,H=E.length;B<H;B++){if(E[B].name===y){t.push({inst:C,node:E[B].node})}}}else{f(z).filter(A).each(function(){t.push({inst:C,node:this})})}}}}else{if(typeof A==="object"&&A.nodeName){var G=f.inArray(A,z);if(G!==-1){t.push({inst:C,node:z[G]})}}}}}};for(var u=0,s=r.length;u<s;u++){var v=r[u];w(q,v)}return t};b.defaults={buttons:["copy","excel","csv","pdf","print"],name:"main",tabIndex:0,dom:{container:{tag:"div",className:"dt-buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"button",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}}};b.version="1.5.1";f.extend(l,{collection:{text:function(q){return q.i18n("buttons.collection","Collection")},className:"buttons-collection",action:function(G,D,q,H){var C=q;var t=f(q).parents("div.dt-button-collection");var A=C.position();var x=f(D.table().container());var w=false;var v=C;if(t.length){w=f(".dt-button-collection").position();v=t;f("body").trigger("click.dtb-collection")}H._collection.addClass(H.collectionLayout).css("display","none").insertAfter(v).fadeIn(H.fade);var J=H._collection.css("position");if(w&&J==="absolute"){H._collection.css({top:w.top,left:w.left})}else{if(J==="absolute"){H._collection.css({top:A.top+C.outerHeight(),left:A.left});var E=x.offset().top+x.height();var I=A.top+C.outerHeight()+H._collection.outerHeight();var z=I-E;var y=A.top-H._collection.outerHeight();var s=x.offset().top;var u=s-y;if(z>u){H._collection.css("top",A.top-H._collection.outerHeight()-5)}var F=A.left+H._collection.outerWidth();var r=x.offset().left+x.width();if(F>r){H._collection.css("left",A.left-(F-r))}}else{var B=H._collection.height()/2;if(B>f(i).height()/2){B=f(i).height()/2}H._collection.css("marginTop",B*-1)}}if(H.background){b.background(true,H.backgroundClassName,H.fade)}setTimeout(function(){f("div.dt-button-background").on("click.dtb-collection",function(){});f("body").on("click.dtb-collection",function(L){var K=f.fn.addBack?"addBack":"andSelf";if(!f(L.target).parents()[K]().filter(H._collection).length){H._collection.fadeOut(H.fade,function(){H._collection.detach()});f("div.dt-button-background").off("click.dtb-collection");b.background(false,H.backgroundClassName,H.fade);f("body").off("click.dtb-collection");D.off("buttons-action.b-internal")}})},10);if(H.autoClose){D.on("buttons-action.b-internal",function(){f("div.dt-button-background").click()})}},background:true,collectionLayout:"",backgroundClassName:"dt-button-background",autoClose:false,fade:400,attr:{"aria-haspopup":true}},copy:function(r,q){if(l.copyHtml5){return"copyHtml5"}if(l.copyFlash&&l.copyFlash.available(r,q)){return"copyFlash"}},csv:function(r,q){if(l.csvHtml5&&l.csvHtml5.available(r,q)){return"csvHtml5"}if(l.csvFlash&&l.csvFlash.available(r,q)){return"csvFlash"}},excel:function(r,q){if(l.excelHtml5&&l.excelHtml5.available(r,q)){return"excelHtml5"}if(l.excelFlash&&l.excelFlash.available(r,q)){return"excelFlash"}},pdf:function(r,q){if(l.pdfHtml5&&l.pdfHtml5.available(r,q)){return"pdfHtml5"}if(l.pdfFlash&&l.pdfFlash.available(r,q)){return"pdfFlash"}},pageLength:function(r){var q=r.settings()[0].aLengthMenu;var s=f.isArray(q[0])?q[0]:q;var u=f.isArray(q[0])?q[1]:q;var t=function(v){return v.i18n("buttons.pageLength",{"-1":"Show all rows",_:"Show %d rows"},v.page.len())};return{extend:"collection",text:t,className:"buttons-page-length",autoClose:true,buttons:f.map(s,function(w,v){return{text:u[v],className:"button-page-length",action:function(y,x){x.page.len(w).draw()},init:function(B,A,x){var z=this;var y=function(){z.active(B.page.len()===w)};B.on("length.dt"+x.namespace,y);y()},destroy:function(z,y,x){z.off("length.dt"+x.namespace)}}}),init:function(y,x,v){var w=this;y.on("length.dt"+v.namespace,function(){w.text(t(y))})},destroy:function(x,w,v){x.off("length.dt"+v.namespace)}}}});e.Api.register("buttons()",function(s,q){if(q===c){q=s;s=c}this.selector.buttonGroup=s;var r=this.iterator(true,"table",function(t){if(t._buttons){return b.buttonSelector(b.instanceSelector(s,t._buttons),q)}},true);r._groupSelector=s;return r});e.Api.register("button()",function(s,q){var r=this.buttons(s,q);if(r.length>1){r.splice(1,r.length)}return r});e.Api.registerPlural("buttons().active()","button().active()",function(q){if(q===c){return this.map(function(r){return r.inst.active(r.node)})}return this.each(function(r){r.inst.active(r.node,q)})});e.Api.registerPlural("buttons().action()","button().action()",function(q){if(q===c){return this.map(function(r){return r.inst.action(r.node)})}return this.each(function(r){r.inst.action(r.node,q)})});e.Api.register(["buttons().enable()","button().enable()"],function(q){return this.each(function(r){r.inst.enable(r.node,q)})});e.Api.register(["buttons().disable()","button().disable()"],function(){return this.each(function(q){q.inst.disable(q.node)})});e.Api.registerPlural("buttons().nodes()","button().node()",function(){var q=f();f(this.each(function(r){q=q.add(r.inst.node(r.node))}));return q});e.Api.registerPlural("buttons().processing()","button().processing()",function(q){if(q===c){return this.map(function(r){return r.inst.processing(r.node)})}return this.each(function(r){r.inst.processing(r.node,q)})});e.Api.registerPlural("buttons().text()","button().text()",function(q){if(q===c){return this.map(function(r){return r.inst.text(r.node)})}return this.each(function(r){r.inst.text(r.node,q)})});e.Api.registerPlural("buttons().trigger()","button().trigger()",function(){return this.each(function(q){q.inst.node(q.node).trigger("click")})});e.Api.registerPlural("buttons().containers()","buttons().container()",function(){var r=f();var q=this._groupSelector;this.iterator(true,"table",function(u){if(u._buttons){var s=b.instanceSelector(q,u._buttons);for(var v=0,t=s.length;v<t;v++){r=r.add(s[v].container())}}});return r});e.Api.register("button().add()",function(q,s){var r=this.context;if(r.length){var t=b.instanceSelector(this._groupSelector,r[0]._buttons);if(t.length){t[0].add(s,q)}}return this.button(this._groupSelector,q)});e.Api.register("buttons().destroy()",function(){this.pluck("inst").unique().each(function(q){q.destroy()});return this});e.Api.registerPlural("buttons().remove()","buttons().remove()",function(){this.each(function(q){q.inst.remove(q.node)});return this});var o;e.Api.register("buttons.info()",function(t,r,s){var q=this;if(t===false){f("#datatables_buttons_info").fadeOut(function(){f(this).remove()});clearTimeout(o);o=null;return this}if(o){clearTimeout(o)}if(f("#datatables_buttons_info").length){f("#datatables_buttons_info").remove()}t=t?"<h2>"+t+"</h2>":"";f('<div id="datatables_buttons_info" class="dt-button-info"/>').html(t).append(f("<div/>")[typeof r==="string"?"html":"append"](r)).css("display","none").appendTo("body").fadeIn();if(s!==c&&s!==0){o=setTimeout(function(){q.buttons.info(false)},s)}return this});e.Api.register("buttons.exportData()",function(q){if(this.context.length){return d(new e.Api(this.context[0]),q)}});e.Api.register("buttons.exportInfo()",function(q){if(!q){q={}}return{filename:a(q),title:p(q),messageTop:n(this,q.message||q.messageTop,"top"),messageBottom:n(this,q.messageBottom,"bottom")}});var a=function(r){var q=r.filename==="*"&&r.title!=="*"&&r.title!==c&&r.title!==null&&r.title!==""?r.title:r.filename;if(typeof q==="function"){q=q()}if(q===c||q===null){return null}if(q.indexOf("*")!==-1){q=f.trim(q.replace("*",f("head > title").text()))}q=q.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,"");var s=m(r.extension);if(!s){s=""}return q+s};var m=function(q){if(q===null||q===c){return null}else{if(typeof q==="function"){return q()}}return q};var p=function(q){var r=m(q.title);return r===null?null:r.indexOf("*")!==-1?r.replace("*",f("head > title").text()||"Exported data"):r};var n=function(v,t,q){var u=m(t);if(u===null){return null}var r=f("caption",v.table().container()).eq(0);if(u==="*"){var s=r.css("caption-side");if(s!==q){return null}return r.length?r.text():""}return u};var h=f("<textarea/>")[0];var d=function(z,y){var I=f.extend(true,{},{rows:null,columns:"",modifier:{search:"applied",order:"applied"},orthogonal:"display",stripHtml:true,stripNewlines:true,decodeEntities:true,trim:true,format:{header:function(J){return B(J)},footer:function(J){return B(J)},body:function(J){return B(J)}}},y);var B=function(J){if(typeof J!=="string"){return J}J=J.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"");if(I.stripHtml){J=J.replace(/<[^>]*>/g,"")}if(I.trim){J=J.replace(/^\s+|\s+$/g,"")}if(I.stripNewlines){J=J.replace(/\n/g," ")}if(I.decodeEntities){h.innerHTML=J;J=h.value}return J};var E=z.columns(I.columns).indexes().map(function(J){var K=z.column(J).header();return I.format.header(K.innerHTML,J,K)}).toArray();var A=z.table().footer()?z.columns(I.columns).indexes().map(function(J){var K=z.column(J).footer();return I.format.footer(K?K.innerHTML:"",J,K)}).toArray():null;var q=f.extend({},I.modifier);if(z.select&&typeof z.select.info==="function"&&q.selected===c){if(z.rows(I.rows,f.extend({selected:true},q)).any()){f.extend(q,{selected:true})}}var G=z.rows(I.rows,q).indexes().toArray();var r=z.cells(G,I.columns);var u=r.render(I.orthogonal).toArray();var D=r.nodes().toArray();var s=E.length;var w=s>0?u.length/s:0;var x=[w];var H=0;for(var F=0,t=w;F<t;F++){var v=[s];for(var C=0;C<s;C++){v[C]=I.format.body(u[H],F,C,D[H]);H++}x[F]=v}return{header:E,footer:A,body:x}};f.fn.dataTable.Buttons=b;f.fn.DataTable.Buttons=b;f(k).on("init.dt plugin-init.dt",function(s,q){if(s.namespace!=="dt"){return}var r=q.oInit.buttons||e.defaults.buttons;if(r&&!q._buttons){new b(q,r).container()}});e.ext.feature.push({fnInit:function(r){var q=new e.Api(r);var s=q.init().buttons||e.defaults.buttons;return new b(q,s).container()},cFeature:"B"});return b}));