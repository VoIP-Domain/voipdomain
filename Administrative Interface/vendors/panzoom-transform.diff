diff -ruN panzoom-3.2.2-orig/dist/jquery.panzoom.js panzoom-3.2.2/dist/jquery.panzoom.js
--- panzoom-3.2.2-orig/dist/jquery.panzoom.js	2016-08-27 21:34:51.000000000 -0400
+++ panzoom-3.2.2/dist/jquery.panzoom.js	2020-03-02 21:47:29.038617142 -0500
@@ -245,7 +245,7 @@
 
 		// Build the appropriately-prefixed transform style property name
 		// De-camelcase
-		this._transform = $.cssProps.transform.replace(rupper, '-$1').toLowerCase();
+		this._transform = $.cssProps.transform ? $.cssProps.transform.replace(rupper, '-$1').toLowerCase() : 'transform';
 
 		// Build the transition value
 		this._buildTransition();
diff -ruN panzoom-3.2.2-orig/dist/jquery.panzoom.min.js panzoom-3.2.2/dist/jquery.panzoom.min.js
--- panzoom-3.2.2-orig/dist/jquery.panzoom.min.js	2016-08-27 21:34:51.000000000 -0400
+++ panzoom-3.2.2/dist/jquery.panzoom.min.js	2020-03-02 21:47:43.231416704 -0500
@@ -1,2 +1,71 @@
-/* jquery.panzoom.min.js 3.2.2 (c) Timmy Willison - MIT License */
-!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return b(a,c)}):"object"==typeof exports?b(a,require("jquery")):b(a,a.jQuery)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function c(a,b){for(var c=a.length;--c;)if(Math.round(+a[c])!==Math.round(+b[c]))return!1;return!0}function d(a){var c={range:!0,animate:!0};return"boolean"==typeof a?c.animate=a:b.extend(c,a),c}function e(a,c,d,e,f,g,h,i,j){"array"===b.type(a)?this.elements=[+a[0],+a[2],+a[4],+a[1],+a[3],+a[5],0,0,1]:this.elements=[a,c,d,e,f,g,h||0,i||0,j||1]}function f(a,b,c){this.elements=[a,b,c]}function g(a,c){if(!(this instanceof g))return new g(a,c);1!==a.nodeType&&b.error("Panzoom called on non-Element node"),b.contains(h,a)||b.error("Panzoom element must be attached to the document");var d=b.data(a,i);if(d)return d;this.options=c=b.extend({},g.defaults,c),this.elem=a;var e=this.$elem=b(a);this.$set=c.$set&&c.$set.length?c.$set:e,this.$doc=b(a.ownerDocument||h),this.$parent=e.parent(),this.parent=this.$parent[0],this.isSVG=n.test(a.namespaceURI)&&"svg"!==a.nodeName.toLowerCase(),this.panning=!1,this._buildTransform(),this._transform=b.cssProps.transform.replace(m,"-$1").toLowerCase(),this._buildTransition(),this.resetDimensions();var f=b(),j=this;b.each(["$zoomIn","$zoomOut","$zoomRange","$reset"],function(a,b){j[b]=c[b]||f}),this.enable(),this.scale=this.getMatrix()[0],this._checkPanWhenZoomed(),b.data(a,i,this)}var h=a.document,i="__pz__",j=Array.prototype.slice,k=/trident\/7./i,l=function(){if(k.test(navigator.userAgent))return!1;var a=h.createElement("input");return a.setAttribute("oninput","return"),"function"==typeof a.oninput}(),m=/([A-Z])/g,n=/^http:[\w\.\/]+svg$/,o="(\\-?\\d[\\d\\.e-]*)",p="\\,?\\s*",q=new RegExp("^matrix\\("+o+p+o+p+o+p+o+p+o+p+o+"\\)$");return e.prototype={x:function(a){var b=a instanceof f,c=this.elements,d=a.elements;return b&&3===d.length?new f(c[0]*d[0]+c[1]*d[1]+c[2]*d[2],c[3]*d[0]+c[4]*d[1]+c[5]*d[2],c[6]*d[0]+c[7]*d[1]+c[8]*d[2]):d.length===c.length&&new e(c[0]*d[0]+c[1]*d[3]+c[2]*d[6],c[0]*d[1]+c[1]*d[4]+c[2]*d[7],c[0]*d[2]+c[1]*d[5]+c[2]*d[8],c[3]*d[0]+c[4]*d[3]+c[5]*d[6],c[3]*d[1]+c[4]*d[4]+c[5]*d[7],c[3]*d[2]+c[4]*d[5]+c[5]*d[8],c[6]*d[0]+c[7]*d[3]+c[8]*d[6],c[6]*d[1]+c[7]*d[4]+c[8]*d[7],c[6]*d[2]+c[7]*d[5]+c[8]*d[8])},inverse:function(){var a=1/this.determinant(),b=this.elements;return new e(a*(b[8]*b[4]-b[7]*b[5]),a*-(b[8]*b[1]-b[7]*b[2]),a*(b[5]*b[1]-b[4]*b[2]),a*-(b[8]*b[3]-b[6]*b[5]),a*(b[8]*b[0]-b[6]*b[2]),a*-(b[5]*b[0]-b[3]*b[2]),a*(b[7]*b[3]-b[6]*b[4]),a*-(b[7]*b[0]-b[6]*b[1]),a*(b[4]*b[0]-b[3]*b[1]))},determinant:function(){var a=this.elements;return a[0]*(a[8]*a[4]-a[7]*a[5])-a[3]*(a[8]*a[1]-a[7]*a[2])+a[6]*(a[5]*a[1]-a[4]*a[2])}},f.prototype.e=e.prototype.e=function(a){return this.elements[a]},g.rmatrix=q,g.defaults={eventNamespace:".panzoom",transition:!0,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,which:1,increment:.3,exponential:!0,panOnlyWhenZoomed:!1,minScale:.3,maxScale:6,rangeStep:.05,duration:200,easing:"ease-in-out",contain:!1},g.prototype={constructor:g,instance:function(){return this},enable:function(){this._initStyle(),this._bind(),this.disabled=!1},disable:function(){this.disabled=!0,this._resetStyle(),this._unbind()},isDisabled:function(){return this.disabled},destroy:function(){this.disable(),b.removeData(this.elem,i)},resetDimensions:function(){this.container=this.parent.getBoundingClientRect();var a=this.elem,c=a.getBoundingClientRect(),d=Math.abs(this.scale);this.dimensions={width:c.width,height:c.height,left:b.css(a,"left",!0)||0,top:b.css(a,"top",!0)||0,border:{top:b.css(a,"borderTopWidth",!0)*d||0,bottom:b.css(a,"borderBottomWidth",!0)*d||0,left:b.css(a,"borderLeftWidth",!0)*d||0,right:b.css(a,"borderRightWidth",!0)*d||0},margin:{top:b.css(a,"marginTop",!0)*d||0,left:b.css(a,"marginLeft",!0)*d||0}}},reset:function(a){a=d(a);var b=this.setMatrix(this._origTransform,a);a.silent||this._trigger("reset",b)},resetZoom:function(a){a=d(a);var b=this.getMatrix(this._origTransform);a.dValue=b[3],this.zoom(b[0],a)},resetPan:function(a){var b=this.getMatrix(this._origTransform);this.pan(b[4],b[5],d(a))},setTransform:function(a){for(var c=this.$set,d=c.length;d--;)b.style(c[d],"transform",a),this.isSVG&&c[d].setAttribute("transform",a)},getTransform:function(a){var c=this.$set,d=c[0];return a?this.setTransform(a):(a=b.style(d,"transform"),!this.isSVG||a&&"none"!==a||(a=b.attr(d,"transform")||"none")),"none"===a||q.test(a)||this.setTransform(a=b.css(d,"transform")),a||"none"},getMatrix:function(a){var b=q.exec(a||this.getTransform());return b&&b.shift(),b||[1,0,0,1,0,0]},setMatrix:function(a,c){if(!this.disabled){c||(c={}),"string"==typeof a&&(a=this.getMatrix(a));var d=+a[0],e="undefined"!=typeof c.contain?c.contain:this.options.contain;if(e){var f=c.dims;f||(this.resetDimensions(),f=this.dimensions);var g,h,i,j=this.container,k=f.width,l=f.height,m=j.width,n=j.height,o=m/k,p=n/l;"center"!==this.$parent.css("textAlign")||"inline"!==b.css(this.elem,"display")?(i=(k-this.elem.offsetWidth)/2,g=i-f.border.left,h=k-m-i+f.border.right):g=h=(k-m)/2;var q=(l-n)/2+f.border.top,r=(l-n)/2-f.border.top-f.border.bottom;"invert"===e||"automatic"===e&&o<1.01?a[4]=Math.max(Math.min(a[4],g-f.border.left),-h):a[4]=Math.min(Math.max(a[4],g),-h),"invert"===e||"automatic"===e&&p<1.01?a[5]=Math.max(Math.min(a[5],q-f.border.top),-r):a[5]=Math.min(Math.max(a[5],q),-r)}if("skip"!==c.animate&&this.transition(!c.animate),c.range&&this.$zoomRange.val(d),this.options.disableXAxis||this.options.disableYAxis){var s=this.getMatrix();this.options.disableXAxis&&(a[4]=s[4]),this.options.disableYAxis&&(a[5]=s[5])}return this.setTransform("matrix("+a.join(",")+")"),this.scale=d,this._checkPanWhenZoomed(d),c.silent||this._trigger("change",a),a}},isPanning:function(){return this.panning},transition:function(a){if(this._transition)for(var c=a||!this.options.transition?"none":this._transition,d=this.$set,e=d.length;e--;)b.style(d[e],"transition")!==c&&b.style(d[e],"transition",c)},pan:function(a,b,c){if(!this.options.disablePan){c||(c={});var d=c.matrix;d||(d=this.getMatrix()),c.relative&&(a+=+d[4],b+=+d[5]),d[4]=a,d[5]=b,this.setMatrix(d,c),c.silent||this._trigger("pan",d[4],d[5])}},zoom:function(a,c){"object"==typeof a?(c=a,a=null):c||(c={});var d=b.extend({},this.options,c);if(!d.disableZoom){var g=!1,h=d.matrix||this.getMatrix(),i=+h[0];"number"!=typeof a&&(a=d.exponential&&i-d.increment>=1?Math[a?"sqrt":"pow"](i,2):i+d.increment*(a?-1:1),g=!0),a>d.maxScale?a=d.maxScale:a<d.minScale&&(a=d.minScale);var j=d.focal;if(j&&!d.disablePan){this.resetDimensions();var k=d.dims=this.dimensions,l=j.clientX,m=j.clientY;this.isSVG||(l-=k.width/i/2,m-=k.height/i/2);var n=new f(l,m,1),o=new e(h),p=this.parentOffset||this.$parent.offset(),q=new e(1,0,p.left-this.$doc.scrollLeft(),0,1,p.top-this.$doc.scrollTop()),r=o.inverse().x(q.inverse().x(n)),s=a/h[0];o=o.x(new e([s,0,0,s,0,0])),n=q.x(o.x(r)),h[4]=+h[4]+(l-n.e(0)),h[5]=+h[5]+(m-n.e(1))}h[0]=a,h[3]="number"==typeof d.dValue?d.dValue:a,this.setMatrix(h,{animate:"undefined"!=typeof d.animate?d.animate:g,range:!d.noSetRange}),d.silent||this._trigger("zoom",h[0],d)}},option:function(a,c){var d;if(!a)return b.extend({},this.options);if("string"==typeof a){if(1===arguments.length)return void 0!==this.options[a]?this.options[a]:null;d={},d[a]=c}else d=a;this._setOptions(d)},_setOptions:function(a){b.each(a,b.proxy(function(a,c){switch(a){case"disablePan":this._resetStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._unbind()}switch(this.options[a]=c,a){case"disablePan":this._initStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":this[a]=c;case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._bind();break;case"cursor":b.style(this.elem,"cursor",c);break;case"minScale":this.$zoomRange.attr("min",c);break;case"maxScale":this.$zoomRange.attr("max",c);break;case"rangeStep":this.$zoomRange.attr("step",c);break;case"startTransform":this._buildTransform();break;case"duration":case"easing":this._buildTransition();case"transition":this.transition();break;case"panOnlyWhenZoomed":this._checkPanWhenZoomed();break;case"$set":c instanceof b&&c.length&&(this.$set=c,this._initStyle(),this._buildTransform())}},this))},_checkPanWhenZoomed:function(a){var b=this.options;if(b.panOnlyWhenZoomed){a||(a=this.getMatrix()[0]);var c=a<=b.minScale;b.disablePan!==c&&this.option("disablePan",c)}},_initStyle:function(){var a={"transform-origin":this.isSVG?"0 0":"50% 50%"};this.options.disablePan||(a.cursor=this.options.cursor),this.$set.css(a);var c=this.$parent;c.length&&!b.nodeName(this.parent,"body")&&(a={overflow:"hidden"},"static"===c.css("position")&&(a.position="relative"),c.css(a))},_resetStyle:function(){this.$elem.css({cursor:"",transition:""}),this.$parent.css({overflow:"",position:""})},_bind:function(){var a=this,c=this.options,d=c.eventNamespace,e="mousedown"+d+" pointerdown"+d+" MSPointerDown"+d,f="touchstart"+d+" "+e,h="touchend"+d+" click"+d+" pointerup"+d+" MSPointerUp"+d,i={},j=this.$reset,k=this.$zoomRange;if(b.each(["Start","Change","Zoom","Pan","End","Reset"],function(){var a=c["on"+this];b.isFunction(a)&&(i["panzoom"+this.toLowerCase()+d]=a)}),c.disablePan&&c.disableZoom||(i[f]=function(b){var d;("touchstart"===b.type?!(d=b.touches||b.originalEvent.touches)||(1!==d.length||c.disablePan)&&2!==d.length:c.disablePan||(b.which||b.originalEvent.which)!==c.which)||(b.preventDefault(),b.stopPropagation(),a._startMove(b,d))},3===c.which&&(i.contextmenu=!1)),this.$elem.on(i),j.length&&j.on(h,function(b){b.preventDefault(),a.reset()}),k.length&&k.attr({step:c.rangeStep===g.defaults.rangeStep&&k.attr("step")||c.rangeStep,min:c.minScale,max:c.maxScale}).prop({value:this.getMatrix()[0]}),!c.disableZoom){var m=this.$zoomIn,n=this.$zoomOut;m.length&&n.length&&(m.on(h,function(b){b.preventDefault(),a.zoom()}),n.on(h,function(b){b.preventDefault(),a.zoom(!0)})),k.length&&(i={},i[e]=function(){a.transition(!0)},i[(l?"input":"change")+d]=function(){a.zoom(+this.value,{noSetRange:!0})},k.on(i))}},_unbind:function(){this.$elem.add(this.$zoomIn).add(this.$zoomOut).add(this.$reset).off(this.options.eventNamespace)},_buildTransform:function(){return this._origTransform=this.getTransform(this.options.startTransform)},_buildTransition:function(){if(this._transform){var a=this.options;this._transition=this._transform+" "+a.duration+"ms "+a.easing}},_getDistance:function(a){var b=a[0],c=a[1];return Math.sqrt(Math.pow(Math.abs(c.clientX-b.clientX),2)+Math.pow(Math.abs(c.clientY-b.clientY),2))},_getMiddle:function(a){var b=a[0],c=a[1];return{clientX:(c.clientX-b.clientX)/2+b.clientX,clientY:(c.clientY-b.clientY)/2+b.clientY}},_trigger:function(a){"string"==typeof a&&(a="panzoom"+a),this.$elem.triggerHandler(a,[this].concat(j.call(arguments,1)))},_startMove:function(a,d){if(!this.panning){var e,f,g,i,j,k,l,m,n=this,o=this.options,p=o.eventNamespace,q=this.getMatrix(),r=q.slice(0),s=+r[4],t=+r[5],u={matrix:q,animate:"skip"},v=a.type;"pointerdown"===v?(e="pointermove",f="pointerup"):"touchstart"===v?(e="touchmove",f="touchend"):"MSPointerDown"===v?(e="MSPointerMove",f="MSPointerUp"):(e="mousemove",f="mouseup"),e+=p,f+=p,this.transition(!0),this.panning=!0,this._trigger("start",a,d);var w=function(a,b){if(b){if(2===b.length){if(null!=g)return;return g=n._getDistance(b),i=+q[0],void(j=n._getMiddle(b))}if(null!=k)return;(m=b[0])&&(k=m.pageX,l=m.pageY)}null==k&&(k=a.pageX,l=a.pageY)};w(a,d);var x=function(a){var b;if(a.preventDefault(),d=a.touches||a.originalEvent.touches,w(a,d),d){if(2===d.length){var c=n._getMiddle(d),e=n._getDistance(d)-g;return n.zoom(e*(o.increment/100)+i,{focal:c,matrix:q,animate:"skip"}),n.pan(+q[4]+c.clientX-j.clientX,+q[5]+c.clientY-j.clientY,u),void(j=c)}b=d[0]||{pageX:0,pageY:0}}b||(b=a),n.pan(s+b.pageX-k,t+b.pageY-l,u)};b(h).off(p).on(e,x).on(f,function(a){a.preventDefault(),b(this).off(p),n.panning=!1,a.type="panzoomend",n._trigger(a,q,!c(q,r))})}}},b.Panzoom=g,b.fn.panzoom=function(a){var c,d,e,f;return"string"==typeof a?(f=[],d=j.call(arguments,1),this.each(function(){c=b.data(this,i),c?"_"!==a.charAt(0)&&"function"==typeof(e=c[a])&&void 0!==(e=e.apply(c,d))&&f.push(e):f.push(void 0)}),f.length?1===f.length?f[0]:f:this):this.each(function(){new g(this,a)})},g});
\ No newline at end of file
+(function(global,factory){if(typeof define==='function'&&define.amd){define(['jquery'],function(jQuery){return factory(global,jQuery);});}else if(typeof exports==='object'){factory(global,require('jquery'));}else{factory(global,global.jQuery);}}(typeof window!=='undefined'?window:this,function(window,$){'use strict';var document=window.document;var datakey='__pz__';var slice=Array.prototype.slice;var rIE11=/trident\/7./i;var supportsInputEvent=(function(){if(rIE11.test(navigator.userAgent)){return false;}
+var input=document.createElement('input');input.setAttribute('oninput','return');return typeof input.oninput==='function';})();var rupper=/([A-Z])/g;var rsvg=/^http:[\w\.\/]+svg$/;var floating='(\\-?\\d[\\d\\.e-]*)';var commaSpace='\\,?\\s*';var rmatrix=new RegExp('^matrix\\('+
+floating+commaSpace+
+floating+commaSpace+
+floating+commaSpace+
+floating+commaSpace+
+floating+commaSpace+
+floating+'\\)$');function matrixEquals(first,second){var i=first.length;while(--i){if(Math.round(+first[i])!==Math.round(+second[i])){return false;}}
+return true;}
+function createResetOptions(opts){var options={range:true,animate:true};if(typeof opts==='boolean'){options.animate=opts;}else{$.extend(options,opts);}
+return options;}
+function Matrix(a,b,c,d,e,f,g,h,i){if($.type(a)==='array'){this.elements=[+a[0],+a[2],+a[4],+a[1],+a[3],+a[5],0,0,1];}else{this.elements=[a,b,c,d,e,f,g||0,h||0,i||1];}}
+Matrix.prototype={x:function(matrix){var isVector=matrix instanceof Vector;var a=this.elements,b=matrix.elements;if(isVector&&b.length===3){return new Vector(a[0]*b[0]+a[1]*b[1]+a[2]*b[2],a[3]*b[0]+a[4]*b[1]+a[5]*b[2],a[6]*b[0]+a[7]*b[1]+a[8]*b[2]);}else if(b.length===a.length){return new Matrix(a[0]*b[0]+a[1]*b[3]+a[2]*b[6],a[0]*b[1]+a[1]*b[4]+a[2]*b[7],a[0]*b[2]+a[1]*b[5]+a[2]*b[8],a[3]*b[0]+a[4]*b[3]+a[5]*b[6],a[3]*b[1]+a[4]*b[4]+a[5]*b[7],a[3]*b[2]+a[4]*b[5]+a[5]*b[8],a[6]*b[0]+a[7]*b[3]+a[8]*b[6],a[6]*b[1]+a[7]*b[4]+a[8]*b[7],a[6]*b[2]+a[7]*b[5]+a[8]*b[8]);}
+return false;},inverse:function(){var d=1/this.determinant(),a=this.elements;return new Matrix(d*(a[8]*a[4]-a[7]*a[5]),d*(-(a[8]*a[1]-a[7]*a[2])),d*(a[5]*a[1]-a[4]*a[2]),d*(-(a[8]*a[3]-a[6]*a[5])),d*(a[8]*a[0]-a[6]*a[2]),d*(-(a[5]*a[0]-a[3]*a[2])),d*(a[7]*a[3]-a[6]*a[4]),d*(-(a[7]*a[0]-a[6]*a[1])),d*(a[4]*a[0]-a[3]*a[1]));},determinant:function(){var a=this.elements;return a[0]*(a[8]*a[4]-a[7]*a[5])-a[3]*(a[8]*a[1]-a[7]*a[2])+a[6]*(a[5]*a[1]-a[4]*a[2]);}};function Vector(x,y,z){this.elements=[x,y,z];}
+Vector.prototype.e=Matrix.prototype.e=function(i){return this.elements[i];};function Panzoom(elem,options){if(!(this instanceof Panzoom)){return new Panzoom(elem,options);}
+if(elem.nodeType!==1){$.error('Panzoom called on non-Element node');}
+if(!$.contains(document,elem)){$.error('Panzoom element must be attached to the document');}
+var d=$.data(elem,datakey);if(d){return d;}
+this.options=options=$.extend({},Panzoom.defaults,options);this.elem=elem;var $elem=this.$elem=$(elem);this.$set=options.$set&&options.$set.length?options.$set:$elem;this.$doc=$(elem.ownerDocument||document);this.$parent=$elem.parent();this.parent=this.$parent[0];this.isSVG=rsvg.test(elem.namespaceURI)&&elem.nodeName.toLowerCase()!=='svg';this.panning=false;this._buildTransform();this._transform=$.cssProps.transform?$.cssProps.transform.replace(rupper,'-$1').toLowerCase():'transform';this._buildTransition();this.resetDimensions();var $empty=$();var self=this;$.each(['$zoomIn','$zoomOut','$zoomRange','$reset'],function(i,name){self[name]=options[name]||$empty;});this.enable();this.scale=this.getMatrix()[0];this._checkPanWhenZoomed();$.data(elem,datakey,this);}
+Panzoom.rmatrix=rmatrix;Panzoom.defaults={eventNamespace:'.panzoom',transition:true,cursor:'move',disablePan:false,disableZoom:false,disableXAxis:false,disableYAxis:false,which:1,increment:0.3,exponential:true,panOnlyWhenZoomed:false,minScale:0.3,maxScale:6,rangeStep:0.05,duration:200,easing:'ease-in-out',contain:false};Panzoom.prototype={constructor:Panzoom,instance:function(){return this;},enable:function(){this._initStyle();this._bind();this.disabled=false;},disable:function(){this.disabled=true;this._resetStyle();this._unbind();},isDisabled:function(){return this.disabled;},destroy:function(){this.disable();$.removeData(this.elem,datakey);},resetDimensions:function(){this.container=this.parent.getBoundingClientRect();var elem=this.elem;var dims=elem.getBoundingClientRect();var absScale=Math.abs(this.scale);this.dimensions={width:dims.width,height:dims.height,left:$.css(elem,'left',true)||0,top:$.css(elem,'top',true)||0,border:{top:$.css(elem,'borderTopWidth',true)*absScale||0,bottom:$.css(elem,'borderBottomWidth',true)*absScale||0,left:$.css(elem,'borderLeftWidth',true)*absScale||0,right:$.css(elem,'borderRightWidth',true)*absScale||0},margin:{top:$.css(elem,'marginTop',true)*absScale||0,left:$.css(elem,'marginLeft',true)*absScale||0}};},reset:function(options){options=createResetOptions(options);var matrix=this.setMatrix(this._origTransform,options);if(!options.silent){this._trigger('reset',matrix);}},resetZoom:function(options){options=createResetOptions(options);var origMatrix=this.getMatrix(this._origTransform);options.dValue=origMatrix[3];this.zoom(origMatrix[0],options);},resetPan:function(options){var origMatrix=this.getMatrix(this._origTransform);this.pan(origMatrix[4],origMatrix[5],createResetOptions(options));},setTransform:function(transform){var $set=this.$set;var i=$set.length;while(i--){$.style($set[i],'transform',transform);if(this.isSVG){$set[i].setAttribute('transform',transform);}}},getTransform:function(transform){var $set=this.$set;var transformElem=$set[0];if(transform){this.setTransform(transform);}else{transform=$.style(transformElem,'transform');if(this.isSVG&&(!transform||transform==='none')){transform=$.attr(transformElem,'transform')||'none';}}
+if(transform!=='none'&&!rmatrix.test(transform)){this.setTransform(transform=$.css(transformElem,'transform'));}
+return transform||'none';},getMatrix:function(transform){var matrix=rmatrix.exec(transform||this.getTransform());if(matrix){matrix.shift();}
+return matrix||[1,0,0,1,0,0];},setMatrix:function(matrix,options){if(this.disabled){return;}
+if(!options){options={};}
+if(typeof matrix==='string'){matrix=this.getMatrix(matrix);}
+var scale=+matrix[0];var contain=typeof options.contain!=='undefined'?options.contain:this.options.contain;if(contain){var dims=options.dims;if(!dims){this.resetDimensions();dims=this.dimensions;}
+var spaceWLeft,spaceWRight,scaleDiff;var container=this.container;var width=dims.width;var height=dims.height;var conWidth=container.width;var conHeight=container.height;var zoomAspectW=conWidth/width;var zoomAspectH=conHeight/height;if(this.$parent.css('textAlign')!=='center'||$.css(this.elem,'display')!=='inline'){scaleDiff=(width-this.elem.offsetWidth)/2;spaceWLeft=scaleDiff-dims.border.left;spaceWRight=width-conWidth-scaleDiff+dims.border.right;}else{spaceWLeft=spaceWRight=((width-conWidth)/2);}
+var spaceHTop=((height-conHeight)/2)+dims.border.top;var spaceHBottom=((height-conHeight)/2)-dims.border.top-dims.border.bottom;if(contain==='invert'||contain==='automatic'&&zoomAspectW<1.01){matrix[4]=Math.max(Math.min(matrix[4],spaceWLeft-dims.border.left),-spaceWRight);}else{matrix[4]=Math.min(Math.max(matrix[4],spaceWLeft),-spaceWRight);}
+if(contain==='invert'||(contain==='automatic'&&zoomAspectH<1.01)){matrix[5]=Math.max(Math.min(matrix[5],spaceHTop-dims.border.top),-spaceHBottom);}else{matrix[5]=Math.min(Math.max(matrix[5],spaceHTop),-spaceHBottom);}}
+if(options.animate!=='skip'){this.transition(!options.animate);}
+if(options.range){this.$zoomRange.val(scale);}
+if(this.options.disableXAxis||this.options.disableYAxis){var originalMatrix=this.getMatrix();if(this.options.disableXAxis){matrix[4]=originalMatrix[4];}
+if(this.options.disableYAxis){matrix[5]=originalMatrix[5];}}
+this.setTransform('matrix('+matrix.join(',')+')');this.scale=scale;this._checkPanWhenZoomed(scale);if(!options.silent){this._trigger('change',matrix);}
+return matrix;},isPanning:function(){return this.panning;},transition:function(off){if(!this._transition){return;}
+var transition=off||!this.options.transition?'none':this._transition;var $set=this.$set;var i=$set.length;while(i--){if($.style($set[i],'transition')!==transition){$.style($set[i],'transition',transition);}}},pan:function(x,y,options){if(this.options.disablePan){return;}
+if(!options){options={};}
+var matrix=options.matrix;if(!matrix){matrix=this.getMatrix();}
+if(options.relative){x+=+matrix[4];y+=+matrix[5];}
+matrix[4]=x;matrix[5]=y;this.setMatrix(matrix,options);if(!options.silent){this._trigger('pan',matrix[4],matrix[5]);}},zoom:function(scale,opts){if(typeof scale==='object'){opts=scale;scale=null;}else if(!opts){opts={};}
+var options=$.extend({},this.options,opts);if(options.disableZoom){return;}
+var animate=false;var matrix=options.matrix||this.getMatrix();var startScale=+matrix[0];if(typeof scale!=='number'){if(options.exponential&&startScale-options.increment>=1){scale=Math[scale?'sqrt':'pow'](startScale,2);}else{scale=startScale+(options.increment*(scale?-1:1));}
+animate=true;}
+if(scale>options.maxScale){scale=options.maxScale;}else if(scale<options.minScale){scale=options.minScale;}
+var focal=options.focal;if(focal&&!options.disablePan){this.resetDimensions();var dims=options.dims=this.dimensions;var clientX=focal.clientX;var clientY=focal.clientY;if(!this.isSVG){clientX-=(dims.width/startScale)/2;clientY-=(dims.height/startScale)/2;}
+var clientV=new Vector(clientX,clientY,1);var surfaceM=new Matrix(matrix);var o=this.parentOffset||this.$parent.offset();var offsetM=new Matrix(1,0,o.left-this.$doc.scrollLeft(),0,1,o.top-this.$doc.scrollTop());var surfaceV=surfaceM.inverse().x(offsetM.inverse().x(clientV));var scaleBy=scale/matrix[0];surfaceM=surfaceM.x(new Matrix([scaleBy,0,0,scaleBy,0,0]));clientV=offsetM.x(surfaceM.x(surfaceV));matrix[4]=+matrix[4]+(clientX-clientV.e(0));matrix[5]=+matrix[5]+(clientY-clientV.e(1));}
+matrix[0]=scale;matrix[3]=typeof options.dValue==='number'?options.dValue:scale;this.setMatrix(matrix,{animate:typeof options.animate!=='undefined'?options.animate:animate,range:!options.noSetRange});if(!options.silent){this._trigger('zoom',matrix[0],options);}},option:function(key,value){var options;if(!key){return $.extend({},this.options);}
+if(typeof key==='string'){if(arguments.length===1){return this.options[key]!==undefined?this.options[key]:null;}
+options={};options[key]=value;}else{options=key;}
+this._setOptions(options);},_setOptions:function(options){$.each(options,$.proxy(function(key,value){switch(key){case 'disablePan':this._resetStyle();case '$zoomIn':case '$zoomOut':case '$zoomRange':case '$reset':case 'disableZoom':case 'onStart':case 'onChange':case 'onZoom':case 'onPan':case 'onEnd':case 'onReset':case 'eventNamespace':this._unbind();}
+this.options[key]=value;switch(key){case 'disablePan':this._initStyle();case '$zoomIn':case '$zoomOut':case '$zoomRange':case '$reset':this[key]=value;case 'disableZoom':case 'onStart':case 'onChange':case 'onZoom':case 'onPan':case 'onEnd':case 'onReset':case 'eventNamespace':this._bind();break;case 'cursor':$.style(this.elem,'cursor',value);break;case 'minScale':this.$zoomRange.attr('min',value);break;case 'maxScale':this.$zoomRange.attr('max',value);break;case 'rangeStep':this.$zoomRange.attr('step',value);break;case 'startTransform':this._buildTransform();break;case 'duration':case 'easing':this._buildTransition();case 'transition':this.transition();break;case 'panOnlyWhenZoomed':this._checkPanWhenZoomed();break;case '$set':if(value instanceof $&&value.length){this.$set=value;this._initStyle();this._buildTransform();}}},this));},_checkPanWhenZoomed:function(scale){var options=this.options;if(options.panOnlyWhenZoomed){if(!scale){scale=this.getMatrix()[0];}
+var toDisable=scale<=options.minScale;if(options.disablePan!==toDisable){this.option('disablePan',toDisable);}}},_initStyle:function(){var styles={'transform-origin':this.isSVG?'0 0':'50% 50%'};if(!this.options.disablePan){styles.cursor=this.options.cursor;}
+this.$set.css(styles);var $parent=this.$parent;if($parent.length&&!$.nodeName(this.parent,'body')){styles={overflow:'hidden'};if($parent.css('position')==='static'){styles.position='relative';}
+$parent.css(styles);}},_resetStyle:function(){this.$elem.css({'cursor':'','transition':''});this.$parent.css({'overflow':'','position':''});},_bind:function(){var self=this;var options=this.options;var ns=options.eventNamespace;var str_down='mousedown'+ns+' pointerdown'+ns+' MSPointerDown'+ns;var str_start='touchstart'+ns+' '+str_down;var str_click='touchend'+ns+' click'+ns+' pointerup'+ns+' MSPointerUp'+ns;var events={};var $reset=this.$reset;var $zoomRange=this.$zoomRange;$.each(['Start','Change','Zoom','Pan','End','Reset'],function(){var m=options['on'+this];if($.isFunction(m)){events['panzoom'+this.toLowerCase()+ns]=m;}});if(!options.disablePan||!options.disableZoom){events[str_start]=function(e){var touches;if(e.type==='touchstart'?(touches=e.touches||e.originalEvent.touches)&&((touches.length===1&&!options.disablePan)||touches.length===2):!options.disablePan&&(e.which||e.originalEvent.which)===options.which){e.preventDefault();e.stopPropagation();self._startMove(e,touches);}};if(options.which===3){events.contextmenu=false;}}
+this.$elem.on(events);if($reset.length){$reset.on(str_click,function(e){e.preventDefault();self.reset();});}
+if($zoomRange.length){$zoomRange.attr({step:options.rangeStep===Panzoom.defaults.rangeStep&&$zoomRange.attr('step')||options.rangeStep,min:options.minScale,max:options.maxScale}).prop({value:this.getMatrix()[0]});}
+if(options.disableZoom){return;}
+var $zoomIn=this.$zoomIn;var $zoomOut=this.$zoomOut;if($zoomIn.length&&$zoomOut.length){$zoomIn.on(str_click,function(e){e.preventDefault();self.zoom();});$zoomOut.on(str_click,function(e){e.preventDefault();self.zoom(true);});}
+if($zoomRange.length){events={};events[str_down]=function(){self.transition(true);};events[(supportsInputEvent?'input':'change')+ns]=function(){self.zoom(+this.value,{noSetRange:true});};$zoomRange.on(events);}},_unbind:function(){this.$elem.add(this.$zoomIn).add(this.$zoomOut).add(this.$reset).off(this.options.eventNamespace);},_buildTransform:function(){return this._origTransform=this.getTransform(this.options.startTransform);},_buildTransition:function(){if(this._transform){var options=this.options;this._transition=this._transform+' '+options.duration+'ms '+options.easing;}},_getDistance:function(touches){var touch1=touches[0];var touch2=touches[1];return Math.sqrt(Math.pow(Math.abs(touch2.clientX-touch1.clientX),2)+Math.pow(Math.abs(touch2.clientY-touch1.clientY),2));},_getMiddle:function(touches){var touch1=touches[0];var touch2=touches[1];return{clientX:((touch2.clientX-touch1.clientX)/2)+touch1.clientX,clientY:((touch2.clientY-touch1.clientY)/2)+touch1.clientY};},_trigger:function(event){if(typeof event==='string'){event='panzoom'+event;}
+this.$elem.triggerHandler(event,[this].concat(slice.call(arguments,1)));},_startMove:function(event,touches){if(this.panning){return;}
+var moveEvent,endEvent,startDistance,startScale,startMiddle,startPageX,startPageY,touch;var self=this;var options=this.options;var ns=options.eventNamespace;var matrix=this.getMatrix();var original=matrix.slice(0);var origPageX=+original[4];var origPageY=+original[5];var panOptions={matrix:matrix,animate:'skip'};var type=event.type;if(type==='pointerdown'){moveEvent='pointermove';endEvent='pointerup';}else if(type==='touchstart'){moveEvent='touchmove';endEvent='touchend';}else if(type==='MSPointerDown'){moveEvent='MSPointerMove';endEvent='MSPointerUp';}else{moveEvent='mousemove';endEvent='mouseup';}
+moveEvent+=ns;endEvent+=ns;this.transition(true);this.panning=true;this._trigger('start',event,touches);var setStart=function(event,touches){if(touches){if(touches.length===2){if(startDistance!=null){return;}
+startDistance=self._getDistance(touches);startScale=+matrix[0];startMiddle=self._getMiddle(touches);return;}
+if(startPageX!=null){return;}
+if((touch=touches[0])){startPageX=touch.pageX;startPageY=touch.pageY;}}
+if(startPageX!=null){return;}
+startPageX=event.pageX;startPageY=event.pageY;};setStart(event,touches);var move=function(e){var coords;e.preventDefault();touches=e.touches||e.originalEvent.touches;setStart(e,touches);if(touches){if(touches.length===2){var middle=self._getMiddle(touches);var diff=self._getDistance(touches)-startDistance;self.zoom(diff*(options.increment/100)+startScale,{focal:middle,matrix:matrix,animate:'skip'});self.pan(+matrix[4]+middle.clientX-startMiddle.clientX,+matrix[5]+middle.clientY-startMiddle.clientY,panOptions);startMiddle=middle;return;}
+coords=touches[0]||{pageX:0,pageY:0};}
+if(!coords){coords=e;}
+self.pan(origPageX+coords.pageX-startPageX,origPageY+coords.pageY-startPageY,panOptions);};$(document).off(ns).on(moveEvent,move).on(endEvent,function(e){e.preventDefault();$(this).off(ns);self.panning=false;e.type='panzoomend';self._trigger(e,matrix,!matrixEquals(matrix,original));});}};$.Panzoom=Panzoom;$.fn.panzoom=function(options){var instance,args,m,ret;if(typeof options==='string'){ret=[];args=slice.call(arguments,1);this.each(function(){instance=$.data(this,datakey);if(!instance){ret.push(undefined);}else if(options.charAt(0)!=='_'&&typeof(m=instance[options])==='function'&&(m=m.apply(instance,args))!==undefined){ret.push(m);}});return ret.length?(ret.length===1?ret[0]:ret):this;}
+return this.each(function(){new Panzoom(this,options);});};return Panzoom;}));
\ No newline at end of file
diff -ruN panzoom-3.2.2-orig/src/panzoom.js panzoom-3.2.2/src/panzoom.js
--- panzoom-3.2.2-orig/src/panzoom.js	2016-08-27 21:34:51.000000000 -0400
+++ panzoom-3.2.2/src/panzoom.js	2020-03-02 21:47:29.038617142 -0500
@@ -245,7 +245,7 @@
 
 		// Build the appropriately-prefixed transform style property name
 		// De-camelcase
-		this._transform = $.cssProps.transform.replace(rupper, '-$1').toLowerCase();
+		this._transform = $.cssProps.transform ? $.cssProps.transform.replace(rupper, '-$1').toLowerCase() : 'transform';
 
 		// Build the transition value
 		this._buildTransition();
