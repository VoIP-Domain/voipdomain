(function(b){function a(e){return e instanceof Object&&Object.keys(e).length>0}function d(e){var f=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return f.test(e)}function c(g){html="";if(typeof g==="string"){g=g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");if(d(g)){html+='<a href="'+g+'" class="json-string">'+g+"</a>"}else{html+='<span class="json-string">"'+g+'"</span>'}}else{if(typeof g==="number"){html+='<span class="json-literal">'+g+"</span>"}else{if(typeof g==="boolean"){html+='<span class="json-literal">'+g+"</span>"}else{if(g===null){html+='<span class="json-literal">null</span>'}else{if(g instanceof Array){if(g.length>0){html+='[<ol class="json-array">';for(var f=0;f<g.length;++f){html+="<li>";if(a(g[f])){html+='<a href class="json-toggle"></a>'}html+=c(g[f]);if(f<g.length-1){html+=","}html+="</li>"}html+="</ol>]"}else{html+="[]"}}else{if(typeof g==="object"){var e=Object.keys(g).length;if(e>0){html+='{<ul class="json-dict">';for(var f in g){if(g.hasOwnProperty(f)){html+="<li>";if(a(g[f])){html+='<a href class="json-toggle">'+f+"</a>"}else{html+=f}html+=": "+c(g[f]);if(--e>0){html+=","}html+="</li>"}}html+="</ul>}"}else{html+="{}"}}}}}}}return html}b.fn.jsonViewer=function(f,e){return this.each(function(){var g=c(f);if(a(f)){g='<a href class="json-toggle"></a>'+g}b(this).html(g);b(this).off("click");b(this).on("click","a.json-toggle",function(){var i=b(this).toggleClass("collapsed").siblings("ul.json-dict, ol.json-array");i.toggle();if(i.is(":visible")){i.siblings(".json-placeholder").remove()}else{var h=i.children("li").length;var j=h+(h>1?" items":" item");i.after('<a href class="json-placeholder">'+j+"</a>")}return false});b(this).on("click","a.json-placeholder",function(){b(this).siblings("a.json-toggle").click();return false});if(typeof e=="object"&&e.collapsed==true){b(this).find("a.json-toggle").click()}})}})(jQuery);