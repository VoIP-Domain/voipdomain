<?php
/**   ___ ___       ___ _______     ______                        __
 *   |   Y   .-----|   |   _   |   |   _  \ .-----.--------.---.-|__.-----.
 *   |.  |   |  _  |.  |.  1   |   |.  |   \|  _  |        |  _  |  |     |
 *   |.  |   |_____|.  |.  ____|   |.  |    |_____|__|__|__|___._|__|__|__|
 *   |:  1   |     |:  |:  |       |:  1    /
 *    \:.. ./      |::.|::.|       |::.. . /
 *     `---'       `---`---'       `------'
 *
 * Copyright (C) 2016-2025 Ernani José Camargo Azevedo
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

/**
 * VoIP Domain country database module filters. This module add the filter calls
 * related to country database of United Kingdom of Great Britain and Northern Ireland.
 *
 * Reference: https://www.itu.int/oth/T02020000DD/en (2022-09-30)
 *
 * Glossary:
 *  CC - Country Code
 *  NDC - National Destination Code (also known as area code)
 *  N(S)N - National (Significant) Number
 *  SN - Subscriber Number
 *
 * @author     Ernani José Camargo Azevedo <azevedo@voipdomain.io>
 * @version    1.0
 * @package    VoIP Domain
 * @subpackage CountryDB
 * @copyright  2016-2025 Ernani José Camargo Azevedo. All rights reserved.
 * @license    https://www.gnu.org/licenses/gpl-3.0.en.html
 */

/**
 * E.164 United Kingdom of Great Britain and Northern Ireland country hook
 */
framework_add_filter ( "e164_identify_country_GBR", "e164_identify_country_GBR");

/**
 * E.164 United Kingdom of Great Britain and Northern Ireland area number
 * identification hook. This hook is an e164_identify sub hook, called when the
 * ISO3166 Alpha3 are "GBR" (code for United Kingdom of Great Britain and
 * Northern Ireland). This hook will verify if phone number is valid, returning
 * the area code, area name, phone number, others number related information and
 * if possible, the number type (mobile, landline, Premium Rate Number, etc).
 *
 * @param string $buffer Buffer from plugin system if processed by other function
 *                       before
 * @param array $parameters Parameters to the function. Number provided as
 *                          $parameters["Number"]
 * @return array Array contaning many information about the requested number
 */
function e164_identify_country_GBR ( $buffer, $parameters)
{
  /**
   * Check if number country code is from United Kingdom of Great Britain and Northern Ireland
   */
  if ( substr ( $parameters["Number"], 0, 3) != "+44")
  {
    return ( is_array ( $buffer) ? $buffer : false);
  }

  /**
   * All numbers in United Kingdom of Great Britain and Northern Ireland has 12 or 13 digits E.164 format
   */
  if ( strlen ( $parameters["Number"]) < 12 || strlen ( $parameters["Number"]) > 13)
  {
    return ( is_array ( $buffer) ? $buffer : false);
  }

  /**
   * Check for mobile network with 2, 3 or 4 digits NDC and 8, 7 or 6 digits SN
   */
  $prefixes = array (
    "7911" => "",
    "7624" => "Isle of Man",
    "79" => "",
    "78" => "",
    "77" => "",
    "75" => "",
    "74" => "",
    "73" => "",
    "72" => "",
    "71" => ""
  );
  foreach ( $prefixes as $prefix => $area)
  {
    if ( strlen ( $parameters["Number"]) == 13 && (int) substr ( $parameters["Number"], 3, strlen ( $prefix)) == $prefix)
    {
      return array_merge_recursive ( ( is_array ( $buffer) ? $buffer : array ()), array ( "CC" => "44", "NDC" => $prefix, "Country" => "United Kingdom of Great Britain and Northern Ireland", "Area" => $area, "City" => "", "Operator" => "", "SN" => substr ( $parameters["Number"], 3 + strlen ( $prefix)), "Type" => VD_PHONETYPE_MOBILE, "CallFormats" => array ( "Local" => "0" . substr ( $parameters["Number"], 3, 4) . " " . substr ( $parameters["Number"], 7, 3) . " " . substr ( $parameters["Number"], 10), "International" => "+44 " . substr ( $parameters["Number"], 3, 4) . " " . substr ( $parameters["Number"], 7, 3) . " " . substr ( $parameters["Number"], 10))));
    }
  }

  /**
   * Check for fixed line network with 2, 3, 4 or 5 digits NDC and 8, 7, 6 or 5 digits SN
   */
  $prefixes = array (
    "159576" => "Fair Isle",
    "159575" => "Foula",
    "19759" => "Alford (Aberdeen)",
    "19758" => "Strathdon",
    "19757" => "Strathdon",
    "19756" => "Strathdon",
    "19755" => "Alford (Aberdeen)",
    "19754" => "Alford (Aberdeen)",
    "19753" => "Strathdon",
    "19752" => "Alford (Aberdeen)",
    "19649" => "Hornsea",
    "19648" => "Hornsea",
    "19647" => "Patrington",
    "19646" => "Patrington",
    "19645" => "Hornsea",
    "19644" => "Patrington",
    "19643" => "Patrington",
    "19642" => "Hornsea",
    "19467" => "Gosforth",
    "18909" => "Ayton",
    "18908" => "Coldstream",
    "18907" => "Ayton",
    "18906" => "Ayton",
    "18905" => "Ayton",
    "18904" => "Coldstream",
    "18903" => "Coldstream",
    "18902" => "Coldstream",
    "18519" => "Great Bernera",
    "18518" => "Stornoway",
    "18517" => "Stornoway",
    "18516" => "Great Bernera",
    "18515" => "Stornoway",
    "18514" => "Great Bernera",
    "18513" => "Stornoway",
    "18512" => "Stornoway",
    "18479" => "Tongue",
    "18478" => "Thurso",
    "18477" => "Tongue",
    "18476" => "Tongue",
    "18475" => "Thurso",
    "18474" => "Thurso",
    "18473" => "Thurso",
    "18472" => "Thurso",
    "17687" => "Keswick",
    "17684" => "Pooley Bridge",
    "17683" => "Appleby",
    "16974" => "Raughton Head",
    "16973" => "Wigton",
    "16869" => "Newtown",
    "16868" => "Newtown",
    "16867" => "Llanidloes",
    "16866" => "Newtown",
    "16865" => "Newtown",
    "16864" => "Llanidloes",
    "16863" => "Llanidloes",
    "16862" => "Llanidloes",
    "15396" => "Sedbergh",
    "15395" => "Grange-over-Sands",
    "15394" => "Hawkshead",
    "15242" => "Hornby",
    "15079" => "Alford (Lincs)",
    "15078" => "Alford (Lincs)",
    "15077" => "Louth",
    "15076" => "Louth",
    "15075" => "Spilsby",
    "15074" => "Alford (Lincs)",
    "15073" => "Louth",
    "15072" => "Spilsby",
    "14379" => "Haverfordwest",
    "14378" => "Haverfordwest",
    "14377" => "Haverfordwest",
    "14376" => "Haverfordwest",
    "14375" => "Clynderwen",
    "14374" => "Clynderwen",
    "14373" => "Clynderwen",
    "14372" => "Clynderwen",
    "14349" => "Bellingham",
    "14348" => "Hexham",
    "14347" => "Hexham",
    "14346" => "Hexham",
    "14345" => "Haltwhistle",
    "14344" => "Bellingham",
    "14343" => "Haltwhistle",
    "14342" => "Bellingham",
    "14309" => "Market Weighton",
    "14308" => "Market Weighton",
    "14307" => "Market Weighton",
    "14306" => "Market Weighton",
    "14305" => "North Cave",
    "14304" => "North Cave",
    "14303" => "North Cave",
    "14302" => "North Cave",
    "14239" => "Boroughbridge",
    "14238" => "Harrogate",
    "14237" => "Harrogate",
    "14236" => "Harrogate",
    "14235" => "Harrogate",
    "14234" => "Boroughbridge",
    "14233" => "Boroughbridge",
    "14232" => "Harrogate",
    "13889" => "Bishop Auckland",
    "13888" => "Bishop Auckland",
    "13887" => "Bishop Auckland",
    "13886" => "Bishop Auckland",
    "13885" => "Stanhope",
    "13884" => "Bishop Auckland",
    "13883" => "Bishop Auckland",
    "13882" => "Stanhope",
    "13873" => "Langholm",
    "13399" => "Ballater",
    "13398" => "Aboyne",
    "13397" => "Ballater",
    "13396" => "Ballater",
    "13395" => "Aboyne",
    "13394" => "Ballater",
    "13393" => "Aboyne",
    "13392" => "Aboyne",
    "12299" => "Millom",
    "12298" => "Barrow-in-Furness",
    "12297" => "Millom",
    "12296" => "Barrow-in-Furness",
    "12295" => "Barrow-in-Furness",
    "12294" => "Barrow-in-Furness",
    "12293" => "Millom",
    "12292" => "Barrow-in-Furness",
    "2897" => "Saintfield",
    "2896" => "Belfast",
    "2895" => "Belfast",
    "2894" => "Antrim",
    "2893" => "Ballyclare",
    "2892" => "Lisburn",
    "2891" => "Bangor (Co. Down)",
    "2890" => "Belfast",
    "2889" => "Fivemiletown",
    "2887" => "Dungannon",
    "2886" => "Cookstown",
    "2885" => "Ballygawley",
    "2882" => "Omagh",
    "2881" => "Newtownstewart",
    "2880" => "Carrickmore",
    "2879" => "Magherafelt",
    "2877" => "Limavady",
    "2872" => "Londonderry",
    "2871" => "Londonderry",
    "2870" => "Coleraine",
    "2868" => "Kesh",
    "2867" => "Lisnaskea",
    "2866" => "Enniskillen",
    "2844" => "Downpatrick",
    "2843" => "Newcastle (Co. Down)",
    "2842" => "Kircubbin",
    "2841" => "Rostrevor",
    "2840" => "Banbridge",
    "2838" => "Portadown",
    "2837" => "Armagh",
    "2830" => "Newry",
    "2829" => "Kilrea",
    "2828" => "Larne",
    "2827" => "Ballymoney",
    "2825" => "Ballymena",
    "2821" => "Martinstown",
    "2820" => "Ballycastle",
    "1997" => "Strathpeffer",
    "1995" => "Garstang",
    "1994" => "St Clears",
    "1993" => "Witney",
    "1992" => "Lea Valley",
    "1989" => "Ross-on-Wye",
    "1988" => "Wigtown",
    "1987" => "Ebbsfleet",
    "1986" => "Bungay",
    "1985" => "Warminster",
    "1984" => "Watchet",
    "1983" => "Isle of Wight",
    "1982" => "Builth Wells",
    "1981" => "Wormbridge",
    "1980" => "Amesbury",
    "1978" => "Wrexham",
    "1977" => "Pontefract",
    "1974" => "Llanon",
    "1972" => "Glenborrodale",
    "1971" => "Scourie",
    "1970" => "Aberystwyth",
    "1969" => "Leyburn",
    "1968" => "Penicuik",
    "1967" => "Strontian",
    "1963" => "Wincanton",
    "1962" => "Winchester",
    "1959" => "Westerham",
    "1957" => "Mid Yell",
    "1955" => "Wick",
    "1954" => "Madingley",
    "1953" => "Wymondham",
    "1952" => "Telford",
    "1951" => "Colonsay",
    "1950" => "Sandwick",
    "1949" => "Whatton",
    "1948" => "Whitchurch",
    "1947" => "Whitby",
    "1946" => "Whitehaven",
    "1945" => "Wisbech",
    "1944" => "West Heslerton",
    "1943" => "Guiseley",
    "1942" => "Wigan",
    "1939" => "Wem",
    "1938" => "Welshpool",
    "1937" => "Wetherby",
    "1935" => "Yeovil",
    "1934" => "Weston-super-Mare",
    "1933" => "Wellingborough",
    "1932" => "Weybridge",
    "1931" => "Shap",
    "1929" => "Wareham",
    "1928" => "Runcorn",
    "1926" => "Warwick",
    "1925" => "Warrington",
    "1924" => "Wakefield",
    "1923" => "Watford",
    "1922" => "Walsall",
    "1920" => "Ware",
    "1919" => "Durham",
    "1918" => "Tyneside",
    "1917" => "Sunderland",
    "1916" => "Tyneside",
    "1915" => "Sunderland",
    "1914" => "Tyneside",
    "1913" => "Durham",
    "1912" => "Tyneside",
    "1909" => "Worksop",
    "1908" => "Milton Keynes",
    "1905" => "Worcester",
    "1904" => "York",
    "1903" => "Worthing",
    "1902" => "Wolverhampton",
    "1900" => "Workington",
    "1899" => "Biggar",
    "1896" => "Galashiels",
    "1895" => "Uxbridge",
    "1892" => "Tunbridge Wells",
    "1889" => "Rugeley",
    "1888" => "Turriff",
    "1887" => "Aberfeldy",
    "1886" => "Bromyard",
    "1885" => "Pencombe",
    "1884" => "Tiverton",
    "1883" => "Caterham",
    "1882" => "Kinloch Rannoch",
    "1880" => "Tarbert",
    "1879" => "Scarinish",
    "1878" => "Lochboisdale",
    "1877" => "Callander",
    "1876" => "Lochmaddy",
    "1875" => "Tranent",
    "1874" => "Brecon",
    "1873" => "Abergavenny",
    "1872" => "Truro",
    "1871" => "Castlebay",
    "1870" => "Isle of Benbecula",
    "1869" => "Bicester",
    "1866" => "Kilchrenan",
    "1865" => "Oxford",
    "1864" => "Abington",
    "1863" => "Ardgay",
    "1862" => "Tain",
    "1859" => "Harris",
    "1858" => "Market Harborough",
    "1857" => "Sanday",
    "1856" => "Orkney",
    "1855" => "Ballachulish",
    "1854" => "Ullapool",
    "1852" => "Kilmelford",
    "1848" => "Thornhill",
    "1845" => "Thirsk",
    "1844" => "Thame",
    "1843" => "Thanet",
    "1842" => "Thetford",
    "1841" => "Newquay",
    "1840" => "Camelford",
    "1838" => "Dalmally",
    "1837" => "Okehampton",
    "1835" => "St Boswells",
    "1834" => "Narberth",
    "1833" => "Barnard Castle",
    "1832" => "Clopton",
    "1830" => "Kirkwhelpington",
    "1829" => "Tarporley",
    "1828" => "Coupar Angus",
    "1827" => "Tamworth",
    "1825" => "Uckfield",
    "1824" => "Ruthin",
    "1823" => "Taunton",
    "1822" => "Tavistock",
    "1821" => "Kinrossie",
    "1809" => "Tomdoun",
    "1808" => "Tomatin",
    "1807" => "Ballindalloch",
    "1806" => "Shetland",
    "1805" => "Torrington",
    "1803" => "Torquay",
    "1799" => "Saffron Walden",
    "1798" => "Pulborough",
    "1797" => "Rye",
    "1796" => "Pitlochry",
    "1795" => "Sittingbourne",
    "1794" => "Romsey",
    "1793" => "Swindon",
    "1792" => "Swansea",
    "1790" => "Spilsby",
    "1789" => "Stratford-upon-Avon",
    "1788" => "Rugby",
    "1787" => "Sudbury",
    "1786" => "Stirling",
    "1785" => "Stafford",
    "1784" => "Staines",
    "1782" => "Stoke-on-Trent",
    "1780" => "Stamford",
    "1779" => "Peterhead",
    "1778" => "Bourne",
    "1777" => "Retford",
    "1776" => "Stranraer",
    "1775" => "Spalding",
    "1773" => "Ripley",
    "1772" => "Preston",
    "1771" => "Maud",
    "1770" => "Isle of Arran",
    "1769" => "South Molton",
    "1768" => "Penrith",
    "1767" => "Sandy",
    "1766" => "Porthmadog",
    "1765" => "Ripon",
    "1764" => "Crieff",
    "1763" => "Royston",
    "1761" => "Temple Cloud",
    "1760" => "Swaffham",
    "1759" => "Pocklington",
    "1758" => "Pwllheli",
    "1757" => "Selby",
    "1756" => "Skipton",
    "1754" => "Skegness",
    "1753" => "Slough",
    "1752" => "Plymouth",
    "1751" => "Pickering",
    "1750" => "Selkirk",
    "1749" => "Shepton Mallet",
    "1748" => "Richmond",
    "1747" => "Shaftesbury",
    "1746" => "Bridgnorth",
    "1745" => "Rhyl",
    "1744" => "St Helens",
    "1743" => "Shrewsbury",
    "1740" => "Sedgefield",
    "1738" => "Perth",
    "1737" => "Redhill",
    "1736" => "Penzance",
    "1733" => "Peterborough",
    "1732" => "Sevenoaks",
    "1730" => "Petersfield",
    "1729" => "Settle",
    "1728" => "Saxmundham",
    "1727" => "St Albans",
    "1726" => "St Austell",
    "1725" => "Rockbourne",
    "1724" => "Scunthorpe",
    "1723" => "Scarborough",
    "1722" => "Salisbury",
    "1721" => "Peebles",
    "1720" => "Isles of Scilly",
    "1709" => "Rotherham",
    "1708" => "Romford",
    "1707" => "Welwyn Garden City",
    "1706" => "Rochdale",
    "1704" => "Southport",
    "1702" => "Southend-on-Sea",
    "1700" => "Rothesay",
    "1698" => "Motherwell",
    "1697" => "Brampton",
    "1695" => "Skelmersdale",
    "1694" => "Church Stretton",
    "1692" => "North Walsham",
    "1691" => "Oswestry",
    "1690" => "Betws-y-Coed",
    "1689" => "Orpington",
    "1688" => "Isle of Mull - Tobermory",
    "1687" => "Mallaig",
    "1685" => "Merthyr Tydfil",
    "1684" => "Malvern",
    "1683" => "Moffat",
    "1681" => "Isle of Mull - Fionnphort",
    "1680" => "Isle of Mull - Craignure",
    "1678" => "Bala",
    "1677" => "Bedale",
    "1676" => "Meriden",
    "1675" => "Coleshill",
    "1674" => "Montrose",
    "1673" => "Market Rasen",
    "1672" => "Marlborough",
    "1671" => "Newton Stewart",
    "1670" => "Morpeth",
    "1669" => "Rothbury",
    "1668" => "Bamburgh",
    "1667" => "Nairn",
    "1666" => "Malmesbury",
    "1665" => "Alnwick",
    "1664" => "Melton Mowbray",
    "1663" => "New Mills",
    "1661" => "Prudhoe",
    "1659" => "Sanquhar",
    "1656" => "Bridgend",
    "1655" => "Maybole",
    "1654" => "Machynlleth",
    "1653" => "Malton",
    "1652" => "Brigg",
    "1651" => "Oldmeldrum",
    "1650" => "Cemmaes Road",
    "1647" => "Moretonhampstead",
    "1646" => "Milford Haven",
    "1644" => "New Galloway",
    "1643" => "Minehead",
    "1642" => "Middlesbrough",
    "1641" => "Strathy",
    "1639" => "Neath",
    "1638" => "Newmarket",
    "1637" => "Newquay",
    "1636" => "Newark",
    "1635" => "Newbury",
    "1634" => "Medway",
    "1633" => "Newport",
    "1631" => "Oban",
    "1630" => "Market Drayton",
    "1629" => "Matlock",
    "1628" => "Maidenhead",
    "1626" => "Newton Abbot",
    "1625" => "Macclesfield",
    "1624" => "Isle of Man",
    "1623" => "Mansfield",
    "1622" => "Maidstone",
    "1621" => "Maldon",
    "1620" => "North Berwick",
    "1609" => "Northallerton",
    "1608" => "Chipping Norton",
    "1606" => "Northwich",
    "1604" => "Northampton",
    "1603" => "Norwich",
    "1600" => "Monmouth",
    "1599" => "Kyle",
    "1598" => "Lynton",
    "1597" => "Llandrindod Wells",
    "1595" => "Lerwick",
    "1594" => "Lydney",
    "1593" => "Lybster",
    "1592" => "Kirkcaldy",
    "1591" => "Llanwrtyd Wells",
    "1590" => "Lymington",
    "1588" => "Bishops Castle",
    "1586" => "Campbeltown",
    "1584" => "Ludlow",
    "1583" => "Carradale",
    "1582" => "Luton",
    "1581" => "New Luce",
    "1580" => "Cranbrook",
    "1579" => "Liskeard",
    "1578" => "Lauder",
    "1577" => "Kinross",
    "1576" => "Lockerbie",
    "1575" => "Kirriemuir",
    "1573" => "Kelso",
    "1572" => "Oakham",
    "1571" => "Lochinver",
    "1570" => "Lampeter",
    "1569" => "Stonehaven",
    "1568" => "Leominster",
    "1567" => "Killin",
    "1566" => "Launceston",
    "1565" => "Knutsford",
    "1564" => "Lapworth",
    "1563" => "Kilmarnock",
    "1562" => "Kidderminster",
    "1561" => "Laurencekirk",
    "1560" => "Moscow",
    "1559" => "Llandysul",
    "1558" => "Llandeilo",
    "1557" => "Kirkcudbright",
    "1556" => "Castle Douglas",
    "1555" => "Lanark",
    "1554" => "Llanelli",
    "1553" => "Kings Lynn",
    "1550" => "Llandovery",
    "1549" => "Lairg",
    "1548" => "Kingsbridge",
    "1547" => "Knighton",
    "1546" => "Lochgilphead",
    "1545" => "Llanarth",
    "1544" => "Kington",
    "1543" => "Cannock",
    "1542" => "Keith",
    "1540" => "Kingussie",
    "1539" => "Kendal",
    "1538" => "Ipstones",
    "1536" => "Kettering",
    "1535" => "Keighley",
    "1534" => "Jersey",
    "1531" => "Ledbury",
    "1530" => "Coalville",
    "1529" => "Sleaford",
    "1528" => "Laggan",
    "1527" => "Redditch",
    "1526" => "Martin",
    "1525" => "Leighton Buzzard",
    "1524" => "Lancaster",
    "1522" => "Lincoln",
    "1520" => "Lochcarron",
    "1509" => "Loughborough",
    "1508" => "Brooke",
    "1506" => "Bathgate",
    "1505" => "Johnstone",
    "1503" => "Looe",
    "1502" => "Lowestoft",
    "1501" => "Harthill",
    "1499" => "Inveraray",
    "1497" => "Hay-on-Wye",
    "1496" => "Port Ellen",
    "1495" => "Pontypool",
    "1494" => "High Wycombe",
    "1493" => "Great Yarmouth",
    "1492" => "Colwyn Bay",
    "1491" => "Henley-on-Thames",
    "1490" => "Corwen",
    "1489" => "Bishops Waltham",
    "1488" => "Hungerford",
    "1487" => "Warboys",
    "1485" => "Hunstanton",
    "1484" => "Huddersfield",
    "1483" => "Guildford",
    "1482" => "Hull",
    "1481" => "Guernsey",
    "1480" => "Huntingdon",
    "1479" => "Grantown-on-Spey",
    "1478" => "Isle of Skye - Portree",
    "1477" => "Holmes Chapel",
    "1476" => "Grantham",
    "1475" => "Greenock",
    "1474" => "Gravesend",
    "1473" => "Ipswich",
    "1472" => "Grimsby",
    "1471" => "Isle of Skye - Broadford",
    "1470" => "Isle of Skye - Edinbane",
    "1469" => "Killingholme",
    "1467" => "Inverurie",
    "1466" => "Huntly",
    "1465" => "Girvan",
    "1464" => "Insch",
    "1463" => "Inverness",
    "1462" => "Hitchin",
    "1461" => "Gretna",
    "1460" => "Chard",
    "1458" => "Glastonbury",
    "1457" => "Glossop",
    "1456" => "Glenurquhart",
    "1455" => "Hinckley",
    "1454" => "Chipping Sodbury",
    "1453" => "Dursley",
    "1452" => "Gloucester",
    "1451" => "Stow-on-the-Wold",
    "1450" => "Hawick",
    "1449" => "Stowmarket",
    "1446" => "Barry",
    "1445" => "Gairloch",
    "1444" => "Haywards Heath",
    "1443" => "Pontypridd",
    "1442" => "Hemel Hempstead",
    "1440" => "Haverhill",
    "1439" => "Helmsley",
    "1438" => "Stevenage",
    "1436" => "Helensburgh",
    "1435" => "Heathfield",
    "1433" => "Hathersage",
    "1432" => "Hereford",
    "1431" => "Helmsdale",
    "1429" => "Hartlepool",
    "1428" => "Haslemere",
    "1427" => "Gainsborough",
    "1425" => "Ringwood",
    "1424" => "Hastings",
    "1422" => "Halifax",
    "1420" => "Alton",
    "1409" => "Holsworthy",
    "1408" => "Golspie",
    "1407" => "Holyhead",
    "1406" => "Holbeach",
    "1405" => "Goole",
    "1404" => "Honiton",
    "1403" => "Horsham",
    "1400" => "Honington",
    "1398" => "Dulverton",
    "1397" => "Fort William",
    "1395" => "Budleigh Salterton",
    "1394" => "Felixstowe",
    "1392" => "Exeter",
    "1389" => "Dumbarton",
    "1387" => "Dumfries",
    "1386" => "Evesham",
    "1384" => "Dudley",
    "1383" => "Dunfermline",
    "1382" => "Dundee",
    "1381" => "Fortrose",
    "1380" => "Devizes",
    "1379" => "Diss",
    "1377" => "Driffield",
    "1376" => "Braintree",
    "1375" => "Grays Thurrock",
    "1373" => "Frome",
    "1372" => "Esher",
    "1371" => "Great Dunmow",
    "1369" => "Dunoon",
    "1368" => "Dunbar",
    "1367" => "Faringdon",
    "1366" => "Downham Market",
    "1364" => "Ashburton",
    "1363" => "Crediton",
    "1362" => "Dereham",
    "1361" => "Duns",
    "1360" => "Killearn",
    "1359" => "Pakenham",
    "1358" => "Ellon",
    "1357" => "Strathaven",
    "1356" => "Brechin",
    "1355" => "East Kilbride",
    "1354" => "Chatteris",
    "1353" => "Ely",
    "1352" => "Mold",
    "1350" => "Dunkeld",
    "1349" => "Dingwall",
    "1348" => "Fishguard",
    "1347" => "Easingwold",
    "1346" => "Fraserburgh",
    "1344" => "Bracknell",
    "1343" => "Elgin",
    "1342" => "East Grinstead",
    "1341" => "Barmouth",
    "1340" => "Craigellachie",
    "1337" => "Ladybank",
    "1335" => "Ashbourne",
    "1334" => "St Andrews",
    "1333" => "Peat Inn",
    "1332" => "Derby",
    "1330" => "Banchory",
    "1329" => "Fareham",
    "1328" => "Fakenham",
    "1327" => "Daventry",
    "1326" => "Falmouth",
    "1325" => "Darlington",
    "1324" => "Falkirk",
    "1323" => "Eastbourne",
    "1322" => "Dartford",
    "1320" => "Fort Augustus",
    "1309" => "Forres",
    "1308" => "Bridport",
    "1307" => "Forfar",
    "1306" => "Dorking",
    "1305" => "Dorchester",
    "1304" => "Dover",
    "1303" => "Folkestone",
    "1302" => "Doncaster",
    "1301" => "Arrochar",
    "1300" => "Cerne Abbas",
    "1299" => "Bewdley",
    "1298" => "Buxton",
    "1297" => "Axminster",
    "1296" => "Aylesbury",
    "1295" => "Banbury",
    "1294" => "Ardrossan",
    "1293" => "Crawley",
    "1292" => "Ayr",
    "1291" => "Chepstow",
    "1290" => "Cumnock",
    "1289" => "Berwick-upon-Tweed",
    "1288" => "Bude",
    "1287" => "Guisborough",
    "1286" => "Caernarfon",
    "1285" => "Cirencester",
    "1284" => "Bury St Edmunds",
    "1283" => "Burton-on-Trent",
    "1282" => "Burnley",
    "1280" => "Buckingham",
    "1279" => "Bishops Stortford",
    "1278" => "Bridgwater",
    "1277" => "Brentwood",
    "1276" => "Camberley",
    "1275" => "Clevedon",
    "1274" => "Bradford",
    "1273" => "Brighton",
    "1271" => "Barnstaple",
    "1270" => "Crewe",
    "1269" => "Ammanford",
    "1268" => "Basildon",
    "1267" => "Carmarthen",
    "1264" => "Andover",
    "1263" => "Cromer",
    "1262" => "Bridlington",
    "1261" => "Banff",
    "1260" => "Congleton",
    "1259" => "Alloa",
    "1258" => "Blandford",
    "1257" => "Coppull",
    "1256" => "Basingstoke",
    "1255" => "Clacton-on-Sea",
    "1254" => "Blackburn",
    "1253" => "Blackpool",
    "1252" => "Aldershot",
    "1250" => "Blairgowrie",
    "1249" => "Chippenham",
    "1248" => "Bangor (Gwynedd)",
    "1246" => "Chesterfield",
    "1245" => "Chelmsford",
    "1244" => "Chester",
    "1243" => "Chichester",
    "1242" => "Cheltenham",
    "1241" => "Arbroath",
    "1239" => "Cardigan",
    "1237" => "Bideford",
    "1236" => "Coatbridge",
    "1235" => "Abingdon",
    "1234" => "Bedford",
    "1233" => "Ashford (Kent)",
    "1228" => "Carlisle",
    "1227" => "Canterbury",
    "1226" => "Barnsley",
    "1225" => "Bath",
    "1224" => "Aberdeen",
    "1223" => "Cambridge",
    "1209" => "Redruth",
    "1208" => "Bodmin",
    "1207" => "Consett",
    "1206" => "Colchester",
    "1205" => "Boston",
    "1204" => "Bolton",
    "1202" => "Bournemouth",
    "1200" => "Clitheroe",
    "239" => "Portsmouth",
    "238" => "Southampton",
    "161" => "Manchester",
    "151" => "Liverpool",
    "141" => "Glasgow",
    "131" => "Edinburgh",
    "121" => "Birmingham",
    "118" => "Reading",
    "117" => "Bristol",
    "116" => "Leicester",
    "115" => "Nottingham",
    "114" => "Sheffield",
    "113" => "Leeds",
    "29" => "Cardiff",
    "24" => "Coventry",
    "20" => "London",
    "3" => ""
  );
  foreach ( $prefixes as $prefix => $area)
  {
    if ( strlen ( $parameters["Number"]) == 13 && (int) substr ( $parameters["Number"], 3, strlen ( $prefix)) == $prefix)
    {
      return array_merge_recursive ( ( is_array ( $buffer) ? $buffer : array ()), array ( "CC" => "44", "NDC" => $prefix, "Country" => "United Kingdom of Great Britain and Northern Ireland", "Area" => $area, "City" => "", "Operator" => "", "SN" => substr ( $parameters["Number"], 3 + strlen ( $prefix)), "Type" => VD_PHONETYPE_LANDLINE, "CallFormats" => array ( "Local" => "0" . substr ( $parameters["Number"], 3, 2) . " " . substr ( $parameters["Number"], 5, 4) . " " . substr ( $parameters["Number"], 9), "International" => "+44 " . substr ( $parameters["Number"], 3, 2) . " " . substr ( $parameters["Number"], 5, 4) . " " . substr ( $parameters["Number"], 9))));
    }
  }

  /**
   * Check for Paging network with 2 digits NDC and 8 digits SN
   */
  $prefixes = array (
    "7629",
    "7628",
    "7627",
    "7626",
    "7625",
    "7623",
    "7622",
    "7621",
    "7620",
    "769",
    "768",
    "767",
    "766",
    "765",
    "764",
    "763",
    "761",
    "760",
    "70"
  );
  foreach ( $prefixes as $prefix)
  {
    if ( strlen ( $parameters["Number"]) == 13 && (int) substr ( $parameters["Number"], 3, strlen ( $prefix)) == $prefix)
    {
      return array_merge_recursive ( ( is_array ( $buffer) ? $buffer : array ()), array ( "CC" => "44", "NDC" => $prefix, "Country" => "United Kingdom of Great Britain and Northern Ireland", "Area" => "", "City" => "", "Operator" => "", "SN" => substr ( $parameters["Number"], 3 + strlen ( $prefix)), "Type" => VD_PHONETYPE_PAGING, "CallFormats" => array ( "Local" => "0" . substr ( $parameters["Number"], 3, 4) . " " . substr ( $parameters["Number"], 7, 3) . " " . substr ( $parameters["Number"], 10), "International" => "+44 " . substr ( $parameters["Number"], 3, 4) . " " . substr ( $parameters["Number"], 7, 3) . " " . substr ( $parameters["Number"], 10))));
    }
  }

  /**
   * Check for Tollfree network with 3 digits NDC and 6 or 7 digits SN
   */
  $prefixes = array (
    "808" => 13,
    "800" => 13,
    "500" => 12
  );
  foreach ( $prefixes as $prefix => $length)
  {
    if ( strlen ( $parameters["Number"]) == $length && (int) substr ( $parameters["Number"], 3, strlen ( $prefix)) == $prefix)
    {
      return array_merge_recursive ( ( is_array ( $buffer) ? $buffer : array ()), array ( "CC" => "44", "NDC" => substr ( $parameters["Number"], 3, 3), "Country" => "United Kingdom of Great Britain and Northern Ireland", "Area" => "", "City" => "", "Operator" => "", "SN" => substr ( $parameters["Number"], 6), "Type" => VD_PHONETYPE_TOLLFREE, "CallFormats" => array ( "Local" => "0" . substr ( $parameters["Number"], 3, 3) . " " . substr ( $parameters["Number"], 6, 3) . " " . substr ( $parameters["Number"], 9), "International" => "+44 " . substr ( $parameters["Number"], 3, 3) . " " . substr ( $parameters["Number"], 6, 3) . " " . substr ( $parameters["Number"], 9))));
    }
  }

  /**
   * Check for VoIP network with 2 digits NDC and 8 digits SN
   */
  $prefixes = array (
    "56",
    "55"
  );
  foreach ( $prefixes as $prefix)
  {
    if ( strlen ( $parameters["Number"]) == 13 && (int) substr ( $parameters["Number"], 3, strlen ( $prefix)) == $prefix)
    {
      return array_merge_recursive ( ( is_array ( $buffer) ? $buffer : array ()), array ( "CC" => "44", "NDC" => $prefix, "Country" => "United Kingdom of Great Britain and Northern Ireland", "Area" => "", "City" => "", "Operator" => "", "SN" => substr ( $parameters["Number"], 3 + strlen ( $prefix)), "Type" => VD_PHONETYPE_VOIP, "CallFormats" => array ( "Local" => "0" . substr ( $parameters["Number"], 3, 2) . " " . substr ( $parameters["Number"], 5, 4) . " " . substr ( $parameters["Number"], 9), "International" => "+44 " . substr ( $parameters["Number"], 3, 2) . " " . substr ( $parameters["Number"], 5, 4) . " " . substr ( $parameters["Number"], 9))));
    }
  }

  /**
   * Check for PRN network with 3 digits NDC and 7 digits SN
   */
  $prefixes = array (
    "899",
    "873",
    "872",
    "871",
    "870",
    "845",
    "844",
    "843",
    "842",
    "820",
    "98",
    "91",
    "90"
  );
  foreach ( $prefixes as $prefix)
  {
    if ( strlen ( $parameters["Number"]) == 13 && (int) substr ( $parameters["Number"], 3, strlen ( $prefix)) == $prefix)
    {
      return array_merge_recursive ( ( is_array ( $buffer) ? $buffer : array ()), array ( "CC" => "44", "NDC" => substr ( $parameters["Number"], 3, 3), "Country" => "United Kingdom of Great Britain and Northern Ireland", "Area" => "", "City" => "", "Operator" => "", "SN" => substr ( $parameters["Number"], 6), "Type" => VD_PHONETYPE_PRN, "CallFormats" => array ( "Local" => "0" . substr ( $parameters["Number"], 3, 2) . " " . substr ( $parameters["Number"], 5, 4) . " " . substr ( $parameters["Number"], 9), "International" => "+44 " . substr ( $parameters["Number"], 3, 2) . " " . substr ( $parameters["Number"], 5, 4) . " " . substr ( $parameters["Number"], 9))));
    }
  }

  /**
   * If reached here, number wasn't identified as a valid United Kingdom of Great Britain and Northern Ireland phone number
   */
  return ( is_array ( $buffer) ? $buffer : false);
}
?>
